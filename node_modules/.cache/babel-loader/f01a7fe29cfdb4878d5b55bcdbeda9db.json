{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialCart = localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [];\nconst initialProducts = [];\nexport const cartSlice = createSlice({\n  name: 'cartItems',\n  initialState: {\n    cartItems: initialCart,\n    productItems: initialProducts\n  },\n  reducers: {\n    addToCart: (state, {\n      payload\n    }) => {\n      let newItem;\n      const itemIndex = state.cartItems.findIndex(({\n        title\n      }) => title === payload.title);\n      const item = state.cartItems[itemIndex];\n      const prodIndex = state.productItems.findIndex(({\n        title\n      }) => title === payload.title);\n      const prodItem = state.productItems[prodIndex];\n      console.log(item);\n\n      if (item) {\n        newItem = { ...payload,\n          count: item.count + 1,\n          price: parseInt(item.price) + parseInt(prodItem.price)\n        };\n      } else {\n        newItem = { ...payload,\n          count: 2\n        };\n      }\n\n      if (itemIndex >= 0) {\n        return {\n          cartItems: [...state.cartItems.slice(0, itemIndex), newItem, ...state.cartItems.slice(itemIndex + 1)],\n          productItems: [...state.productItems]\n        };\n      }\n\n      state.cartItems.push(payload);\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n    delCounter: (state, {\n      payload\n    }) => {\n      let newItem;\n      const itemIndex = state.cartItems.findIndex(({\n        title\n      }) => title === payload.title);\n      const item = state.cartItems[itemIndex];\n      const prodIndex = state.productItems.findIndex(({\n        title\n      }) => title === payload.title);\n      const prodItem = state.productItems[prodIndex];\n\n      if (payload.count > 1) {\n        if (item) {\n          newItem = { ...payload,\n            count: item.count - 1,\n            price: parseInt(payload.price) - parseInt(prodItem.price)\n          };\n        } else {\n          newItem = { ...payload,\n            count: 1\n          };\n        }\n\n        if (itemIndex >= 0) {\n          return {\n            cartItems: [...state.cartItems.slice(0, itemIndex), newItem, ...state.cartItems.slice(itemIndex + 1)]\n          };\n        }\n\n        state.cartItems.push(newItem);\n      } else {\n        state.cartItems = state.cartItems.filter(({\n          title\n        }) => title !== payload.title);\n      }\n\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n    delFromCart: (state, {\n      payload\n    }) => {\n      state.cartItems = state.cartItems.filter(({\n        title\n      }) => title !== payload.title);\n      localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\n    },\n    addProducts: (state, {\n      payload\n    }) => {\n      payload.map(item => {\n        return state.productItems.push(item);\n      });\n    }\n  }\n});\nexport const {\n  addToCart,\n  delFromCart,\n  delCounter,\n  addProducts\n} = cartSlice.actions;\nexport const showCartItems = state => state.cartItems.cartItems;\nexport default cartSlice.reducer;","map":{"version":3,"sources":["C:/Users/antip/Desktop/study/shop/src/features/cart/cartSlice.js"],"names":["createSlice","initialCart","localStorage","getItem","JSON","parse","initialProducts","cartSlice","name","initialState","cartItems","productItems","reducers","addToCart","state","payload","newItem","itemIndex","findIndex","title","item","prodIndex","prodItem","console","log","count","price","parseInt","slice","push","setItem","stringify","delCounter","filter","delFromCart","addProducts","map","actions","showCartItems","reducer"],"mappings":"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","sourcesContent":["import {createSlice} from '@reduxjs/toolkit';\r\n\r\n\r\nconst initialCart = localStorage.getItem('cartItems')\r\n  ? JSON.parse(localStorage.getItem('cartItems'))\r\n  : [];\r\n\r\nconst initialProducts = []\r\n\r\n  export const cartSlice = createSlice({\r\n    name: 'cartItems',\r\n    initialState: {\r\n        cartItems: initialCart,\r\n        productItems: initialProducts\r\n    },\r\n    reducers: {\r\n        addToCart: (state, {payload}) => {\r\n            let newItem;\r\n            \r\n            const itemIndex = state.cartItems.findIndex(({title}) => title === payload.title)\r\n            const item = state.cartItems[itemIndex]\r\n\r\n            const prodIndex = state.productItems.findIndex(({title}) => title === payload.title);\r\n            const prodItem = state.productItems[prodIndex]\r\n            console.log(item);\r\n            if(item) {\r\n                newItem = {\r\n                    ...payload,\r\n                    count: item.count + 1,\r\n                    price: parseInt(item.price) + parseInt(prodItem.price)\r\n                }\r\n            } else {\r\n                newItem = {\r\n                    ...payload, \r\n                    count: 2\r\n                }\r\n            }\r\n\r\n            if(itemIndex >= 0) {\r\n                return {\r\n                    cartItems: [\r\n                        ...state.cartItems.slice(0, itemIndex),\r\n                        newItem,\r\n                        ...state.cartItems.slice(itemIndex + 1),\r\n                    ],\r\n                    productItems: [...state.productItems]\r\n                }\r\n            } \r\n            \r\n            state.cartItems.push(payload)\r\n            \r\n            localStorage.setItem('cartItems', JSON.stringify(state.cartItems))\r\n            \r\n        },\r\n        delCounter: (state, {payload}) => {\r\n            let newItem;\r\n            const itemIndex = state.cartItems.findIndex(({title}) => title === payload.title)\r\n            const item = state.cartItems[itemIndex]\r\n\r\n            const prodIndex = state.productItems.findIndex(({title}) => title === payload.title);\r\n            const prodItem = state.productItems[prodIndex]\r\n\r\n\r\n            if(payload.count > 1) {\r\n                if(item) {\r\n                    newItem = {\r\n                        ...payload,\r\n                        count: item.count - 1,\r\n                        price: parseInt(payload.price) - parseInt(prodItem.price)\r\n                    }\r\n                } else {\r\n                    newItem = {\r\n                        ...payload, \r\n                        count: 1\r\n                    }\r\n                }\r\n\r\n                if(itemIndex >= 0) {\r\n                    return {\r\n                        cartItems: [\r\n                            ...state.cartItems.slice(0, itemIndex),\r\n                            newItem,\r\n                            ...state.cartItems.slice(itemIndex + 1)\r\n                        ]\r\n                    }\r\n                }\r\n            \r\n                state.cartItems.push(newItem)\r\n\r\n            } else {\r\n                state.cartItems = state.cartItems.filter(({title}) => title !== payload.title);\r\n            }\r\n            localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\r\n        },\r\n        delFromCart: (state, {payload}) => {\r\n            state.cartItems = state.cartItems.filter(({title}) => title !== payload.title);\r\n            localStorage.setItem('cartItems', JSON.stringify(state.cartItems));\r\n        },\r\n        addProducts: (state , {payload}) => {\r\n                payload.map((item) => {\r\n                    return state.productItems.push(item);\r\n                })\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport const {addToCart, delFromCart, delCounter, addProducts} = cartSlice.actions;\r\n\r\n\r\nexport const showCartItems = state => state.cartItems.cartItems;\r\n\r\n\r\nexport default cartSlice.reducer;"]},"metadata":{},"sourceType":"module"}